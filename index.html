<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        
        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        button {
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:disabled {
            background-color: #cccccc !important;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            position: relative;
            perspective: 1000px;
            width: 300px;
            margin: 0 auto;
        }
        
        .card {
            width: 300px;
            height: 400px;
            border-radius: 15px;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            backface-visibility: hidden;
            margin: 0 auto;
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .card-front {
            background-color: #333;
            transform: rotateY(0deg);
        }
        
        .card-back {
            background-color: inherit;
            transform: rotateY(180deg);
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-name {
            font-size: 48px;
            margin-bottom: 10px;
            font-weight: 900;
        }
        
        .card-rarity {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .card-chance {
            font-size: 16px;
        }
        
        .card-reward {
            position: absolute;
            bottom: 15px;
            right: 15px;
            font-size: 20px;
        }
        
        .collection-container {
            max-width: 900px;
            margin: 30px auto 0;
            overflow-x: auto;
        }
        
        .collection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .collection-card {
            width: 150px;
            height: 200px;
            border-radius: 8px;
            padding: 10px;
            box-sizing: border-box;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 1px black;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            transition: transform 0.3s;
            position: relative;
        }
        
        .collection-card:hover {
            transform: scale(1.05);
        }
        
        .collection-card .card-name {
            font-size: 36px;
            margin-bottom: 5px;
            font-weight: 900;
        }
        
        .collection-card .card-rarity {
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .collection-card .card-chance {
            font-size: 12px;
        }
        
        .collection-card .card-reward {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 16px;
        }
        
        .cooldown {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 10;
        }
        
        .reset-btn {
            background-color: #f44336;
        }
        
        .reset-btn:hover {
            background-color: #d32f2f;
        }
        
        .normal-pack {
            background-color: #4CAF50;
        }
        
        .normal-pack:hover {
            background-color: #45a049;
        }
        
        .rare-pack {
            background-color: #2196F3;
        }
        
        .rare-pack:hover {
            background-color: #0b7dda;
        }
        
        .epic-pack {
            background-color: #9C27B0;
        }
        
        .epic-pack:hover {
            background-color: #7B1FA2;
        }
        
        .legendary-pack {
            background-color: #FF9800;
        }
        
        .legendary-pack:hover {
            background-color: #F57C00;
        }
        
        .rarity-info {
            margin-top: 20px;
            padding: 10px;
            background-color: #e9e9e9;
            border-radius: 5px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è —Å—á—ë—Ç—á–∏–∫–∞ –¥–µ–Ω–µ–≥ */
        .money-counter {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            z-index: 1000;
        }
        
        .money-counter::before {
            content: "$";
            margin-right: 5px;
            font-size: 20px;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–µ–Ω–µ–≥ */
        .money-notification {
            position: fixed;
            top: 70px;
            left: 20px;
            background-color: rgba(76, 175, 80, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .pack-info {
            font-size: 12px;
            margin-top: 5px;
            font-weight: normal;
            color: rgba(255, 255, 255, 0.8);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º—É—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .mutated {
            animation: colorChange 3s infinite;
        }
        
        .mutated-badge {
            position: absolute;
            top: 5px;
            left: 5px;
            background-color: #FF00FF;
            color: white;
            padding: 2px 5px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
            z-index: 1;
        }
        
        @keyframes colorChange {
            0% { background-color: #FF0000; }
            14% { background-color: #FF7F00; }
            28% { background-color: #FFFF00; }
            42% { background-color: #00FF00; }
            56% { background-color: #0000FF; }
            70% { background-color: #4B0082; }
            84% { background-color: #9400D3; }
            100% { background-color: #FF0000; }
        }
    </style>
</head>
<body>
    <!-- –°—á—ë—Ç—á–∏–∫ –¥–µ–Ω–µ–≥ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
    <div id="moneyCounter" class="money-counter">10</div>
    <div id="moneyNotification" class="money-notification"></div>
    
    <h1>–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏</h1>
    <div class="button-container">
        <button id="buyPack" class="normal-pack">
            –û–±—ã—á–Ω—ã–π –ø–∞–∫ (1$)
            <div class="pack-info">–í—Å–µ –∫–∞—Ä—Ç—ã, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–Ω—Å—ã</div>
        </button>
        <button id="buyRarePack" class="rare-pack">
            –†–µ–¥–∫–∏–π –ø–∞–∫ (10$)
            <div class="pack-info">–®–∞–Ω—Å –Ω–∞ —Ä–µ–¥–∫–∏–µ √ó1.5, –±–µ–∑ H –∏ F</div>
        </button>
        <button id="buyEpicPack" class="epic-pack">
            –≠–ø–∏—á–µ—Å–∫–∏–π –ø–∞–∫ (20$)
            <div class="pack-info">–®–∞–Ω—Å √ó3, –±–µ–∑ H, F, E</div>
        </button>
        <button id="buyLegendaryPack" class="legendary-pack">
            –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ø–∞–∫ (50$)
            <div class="pack-info">–®–∞–Ω—Å √ó7, –±–µ–∑ H-F-D</div>
        </button>
        <button id="resetCollection" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é</button>
    </div>
    <div id="cooldown" class="cooldown" style="display: none;"></div>
    
    <div class="rarity-info">
        <h3>–®–∞–Ω—Å—ã –≤—ã–ø–∞–¥–µ–Ω–∏—è (–æ—Ç —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –∫ —Å–∞–º—ã–º —Ä–µ–¥–∫–∏–º):</h3>
        <div id="rarityChances"></div>
    </div>
    
    <div id="cardModal" class="modal">
        <div class="modal-content">
            <div id="newCard" class="card">
                <div class="card-front">–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç—É...</div>
                <div class="card-back">
                    <div class="card-name"></div>
                    <div class="card-rarity"></div>
                    <div class="card-chance"></div>
                    <div class="card-reward"></div>
                </div>
            </div>
        </div>
    </div>
    
    <h2>–í–∞—à–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è</h2>
    <div class="collection-container">
        <div id="collection" class="collection"></div>
    </div>
    
    <script>
        // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ –æ—Ç H (—Å–∞–º–æ–π —á–∞—Å—Ç–æ–π) –¥–æ SSS (—Å–∞–º–æ–π —Ä–µ–¥–∫–æ–π)
        const cardTypes = [
            { name: "H", rarity: "–ë–∞–∑–æ–≤—ã–π", color: "#AAAAAA", weight: 16384, reward: 1 },
            { name: "F", rarity: "–û–±—ã—á–Ω—ã–π", color: "#777777", weight: 4096, reward: 2 },
            { name: "E", rarity: "–ù–µ–æ–±—ã—á–Ω—ã–π", color: "#5555FF", weight: 1024, reward: 3 },
            { name: "D", rarity: "–†–µ–¥–∫–∏–π", color: "#AA00AA", weight: 256, reward: 5 },
            { name: "C", rarity: "–≠–ø–∏—á–µ—Å–∫–∏–π", color: "#FFAA00", weight: 64, reward: 10 },
            { name: "B", rarity: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π", color: "#FF5555", weight: 16, reward: 20 },
            { name: "A", rarity: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π", color: "#FF0000", weight: 4, reward: 50 },
            { name: "A+", rarity: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π", color: "#FF00FF", weight: 1, reward: 100 },
            { name: "S+", rarity: "–¢—Ä–∞–Ω—Å—Ü–µ–Ω–¥–µ–Ω—Ç–Ω—ã–π", color: "#00FFFF", weight: 0.25, reward: 200 },
            { name: "S++", rarity: "–í–µ—á–Ω—ã–π", color: "#FFFF00", weight: 0.0625, reward: 500 },
            { name: "S+++", rarity: "–ê–±—Å–æ–ª—é—Ç–Ω—ã–π", color: "#00FF00", weight: 0.015625, reward: 1000 },
            { name: "S", rarity: "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π", color: "#FF8800", weight: 0.00390625, reward: 2000 },
            { name: "SS+", rarity: "–°–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π", color: "#8800FF", weight: 0.0009765625, reward: 5000 },
            { name: "SSS", rarity: "–í—Å–µ–ª–µ–Ω—Å–∫–∏–π", color: "#FF0088", weight: 0.000244140625, reward: 10000 }
        ];

        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–∏–π –≤–µ—Å –¥–ª—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
        const totalWeight = cardTypes.reduce((sum, card) => sum + card.weight, 0);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–Ω—Å—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≤–µ—Å–æ–º
        cardTypes.forEach(card => {
            const chance = totalWeight / card.weight;
            card.chance = `1 –∫ ${Math.round(chance)}`;
        });

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const buyPackBtn = document.getElementById('buyPack');
        const buyRarePackBtn = document.getElementById('buyRarePack');
        const buyEpicPackBtn = document.getElementById('buyEpicPack');
        const buyLegendaryPackBtn = document.getElementById('buyLegendaryPack');
        const resetBtn = document.getElementById('resetCollection');
        const cardModal = document.getElementById('cardModal');
        const newCard = document.getElementById('newCard');
        const collection = document.getElementById('collection');
        const cooldownElement = document.getElementById('cooldown');
        const rarityChancesElement = document.getElementById('rarityChances');
        const moneyCounter = document.getElementById('moneyCounter');
        const moneyNotification = document.getElementById('moneyNotification');
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —à–∞–Ω—Å—ã –≤—ã–ø–∞–¥–µ–Ω–∏—è
        rarityChancesElement.innerHTML = cardTypes.map(card => 
            `<div><strong>${card.name}</strong> (${card.rarity}): ${card.chance}</div>`
        ).join('');
        
        // –ö–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userCollection = loadCollection();
        let isCooldown = false;
        const COOLDOWN_TIME = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã –∫—É–ª–¥–∞—É–Ω–∞
        
        // –î–µ–Ω—å–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let money = loadMoney();
        updateMoneyCounter();
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        updateCollection();
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–∫–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
        function openPack(packType) {
            if (isCooldown) return;
            
            const packSettings = {
                normal: { cost: 1, multiplier: 1, exclude: [] },
                rare: { cost: 10, multiplier: 1.5, exclude: ["H", "F"] },
                epic: { cost: 20, multiplier: 3, exclude: ["H", "F", "E"] },
                legendary: { cost: 50, multiplier: 7, exclude: ["H", "F", "D"] }
            };
            
            const { cost, multiplier, exclude } = packSettings[packType];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–µ–Ω—å–≥–∏
            if (money < cost) {
                alert(`–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥! –ù—É–∂–Ω–æ ${cost}$ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —ç—Ç–æ–≥–æ –ø–∞–∫–∞.`);
                return;
            }
            
            // –°–Ω–∏–º–∞–µ–º –¥–µ–Ω—å–≥–∏ –∑–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ
            money -= cost;
            saveMoney();
            updateMoneyCounter();
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫—É–ª–¥–∞—É–Ω
            startCooldown();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π —Ä—É–±–∞—à–∫–æ–π –≤–≤–µ—Ä—Ö
            newCard.classList.remove('flipped');
            cardModal.style.display = 'flex';
            
            // –ß–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –≤—ã–±–∏—Ä–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É
            setTimeout(() => {
                // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –º–∞—Å—Å–∏–≤–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
                const cardsForSelection = cardTypes
                    .filter(card => !exclude.includes(card.name))
                    .map(card => {
                        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤–µ—Å –∫–∞—Ä—Ç –≤ multiplier —Ä–∞–∑ –¥–ª—è —Ä–µ–¥–∫–∏—Ö –∏ –≤—ã—à–µ
                        const rareIndex = cardTypes.findIndex(c => c.rarity === "–†–µ–¥–∫–∏–π");
                        const currentIndex = cardTypes.findIndex(c => c.name === card.name);
                        const isRareOrBetter = currentIndex >= rareIndex;
                        
                        return {
                            ...card,
                            weight: isRareOrBetter ? card.weight * multiplier : card.weight
                        };
                    });
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–∏–π –≤–µ—Å –¥–ª—è –≤—ã–±–æ—Ä–∞
                const selectionTotalWeight = cardsForSelection.reduce((sum, card) => sum + card.weight, 0);
                
                // –í—ã–±–∏—Ä–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Å —É—á–µ—Ç–æ–º –≤–µ—Å–æ–≤
                const randomValue = Math.random() * selectionTotalWeight;
                let cumulativeWeight = 0;
                let selectedCard = null;
                
                for (const card of cardsForSelection) {
                    cumulativeWeight += card.weight;
                    if (randomValue <= cumulativeWeight) {
                        selectedCard = card;
                        break;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º—É—Ç–∞—Ü–∏—é (1% —à–∞–Ω—Å)
                const isMutated = Math.random() < 0.01;
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
                const card = {
                    ...selectedCard, 
                    id: Date.now(),
                    mutated: isMutated,
                    // –î–ª—è –º—É—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞–≥—Ä–∞–¥—É –≤ 2 —Ä–∞–∑–∞
                    reward: isMutated ? selectedCard.reward * 2 : selectedCard.reward
                };
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
                const cardBack = newCard.querySelector('.card-back');
                cardBack.style.backgroundColor = card.color;
                cardBack.querySelector('.card-name').textContent = card.name;
                cardBack.querySelector('.card-rarity').textContent = card.rarity + (card.mutated ? " (–ú—É—Ç–∞—Ü–∏—è)" : "");
                cardBack.querySelector('.card-chance').textContent = card.chance;
                cardBack.querySelector('.card-reward').textContent = card.reward + "$";
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –º—É—Ç–∞—Ü–∏–∏, –µ—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –º—É—Ç–∏—Ä–æ–≤–∞–ª–∞
                if (card.mutated) {
                    cardBack.classList.add('mutated');
                } else {
                    cardBack.classList.remove('mutated');
                }
                
                // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏
                setTimeout(() => {
                    newCard.classList.add('flipped');
                }, 500);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
                userCollection.push(card);
                saveCollection();
                updateCollection();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ–Ω—å–≥–∏ –∑–∞ –∫–∞—Ä—Ç–æ—á–∫—É
                money += card.reward;
                saveMoney();
                updateMoneyCounter();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–µ–Ω–µ–≥
                showMoneyNotification(`+${card.reward}$`);
                
                // –ï—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –º—É—Ç–∏—Ä–æ–≤–∞–ª–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                if (card.mutated) {
                    setTimeout(() => {
                        alert("üî• –£–ù–ò–ö–ê–õ–¨–ù–ê–Ø –ú–£–¢–ê–¶–ò–Ø! üî•\n–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Ä–µ–¥–∫—É—é –º—É—Ç–∏—Ä–æ–≤–∞–≤—à—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å —É–¥–≤–æ–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä–∞–¥–æ–π!");
                    }, 1000);
                }
                
            }, 500);
        }
        
        // –ü–æ–∫—É–ø–∫–∞ –æ–±—ã—á–Ω–æ–≥–æ –ø–∞–∫–∞
        buyPackBtn.addEventListener('click', () => openPack('normal'));
        
        // –ü–æ–∫—É–ø–∫–∞ —Ä–µ–¥–∫–æ–≥–æ –ø–∞–∫–∞
        buyRarePackBtn.addEventListener('click', () => openPack('rare'));
        
        // –ü–æ–∫—É–ø–∫–∞ —ç–ø–∏—á–µ—Å–∫–æ–≥–æ –ø–∞–∫–∞
        buyEpicPackBtn.addEventListener('click', () => openPack('epic'));
        
        // –ü–æ–∫—É–ø–∫–∞ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –ø–∞–∫–∞
        buyLegendaryPackBtn.addEventListener('click', () => openPack('legendary'));
        
        // –°–±—Ä–æ—Å –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        resetBtn.addEventListener('click', function() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å—é –∫–æ–ª–ª–µ–∫—Ü–∏—é?")) {
                userCollection = [];
                saveCollection();
                updateCollection();
                
                // –°–±—Ä–æ—Å –¥–µ–Ω–µ–≥
                money = 10;
                saveMoney();
                updateMoneyCounter();
            }
        });
        
        // –ö—É–ª–¥–∞—É–Ω –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
        function startCooldown() {
            isCooldown = true;
            buyPackBtn.disabled = true;
            buyRarePackBtn.disabled = true;
            buyEpicPackBtn.disabled = true;
            buyLegendaryPackBtn.disabled = true;
            let timeLeft = COOLDOWN_TIME / 1000;
            
            cooldownElement.style.display = 'block';
            cooldownElement.textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${timeLeft} —Å–µ–∫`;
            
            const interval = setInterval(() => {
                timeLeft--;
                cooldownElement.textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${timeLeft} —Å–µ–∫`;
                
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    isCooldown = false;
                    buyPackBtn.disabled = false;
                    buyRarePackBtn.disabled = false;
                    buyEpicPackBtn.disabled = false;
                    buyLegendaryPackBtn.disabled = false;
                    cooldownElement.style.display = 'none';
                }
            }, 1000);
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        function saveCollection() {
            localStorage.setItem('cardCollection', JSON.stringify(userCollection));
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        function loadCollection() {
            const savedCollection = localStorage.getItem('cardCollection');
            return savedCollection ? JSON.parse(savedCollection) : [];
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–µ–Ω–µ–≥
        function saveMoney() {
            localStorage.setItem('userMoney', money.toString());
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ–Ω–µ–≥
        function loadMoney() {
            const savedMoney = localStorage.getItem('userMoney');
            return savedMoney ? parseInt(savedMoney) : 10; // –ù–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–Ω–µ–≥ - 10$
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –¥–µ–Ω–µ–≥
        function updateMoneyCounter() {
            moneyCounter.textContent = money;
        }
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–µ–Ω–µ–≥
        function showMoneyNotification(amount) {
            moneyNotification.textContent = amount;
            moneyNotification.style.opacity = '1';
            
            setTimeout(() => {
                moneyNotification.style.opacity = '0';
            }, 2000);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å
        cardModal.addEventListener('click', function(e) {
            if (e.target === cardModal && newCard.classList.contains('flipped')) {
                cardModal.style.display = 'none';
            }
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏
        function updateCollection() {
            collection.innerHTML = '';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—é –æ—Ç –ª—É—á—à–∏—Ö (SSS) –∫ —Ö—É–¥—à–∏–º (H) –∫–∞—Ä—Ç–∞–º
            const sortedCollection = [...userCollection].sort((a, b) => {
                const aIndex = cardTypes.findIndex(card => card.name === a.name);
                const bIndex = cardTypes.findIndex(card => card.name === b.name);
                return aIndex - bIndex; // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É –≤ cardTypes (–æ—Ç H –∫ SSS)
            }).reverse(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç SSS –∫ H
            
            sortedCollection.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'collection-card';
                cardElement.style.backgroundColor = card.color;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –º—É—Ç–∞—Ü–∏–∏, –µ—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –º—É—Ç–∏—Ä–æ–≤–∞–ª–∞
                if (card.mutated) {
                    cardElement.classList.add('mutated');
                }
                
                cardElement.innerHTML = `
                    ${card.mutated ? '<div class="mutated-badge">MUT</div>' : ''}
                    <div class="card-name">${card.name}</div>
                    <div class="card-rarity">${card.rarity}${card.mutated ? ' (–ú—É—Ç–∞—Ü–∏—è)' : ''}</div>
                    <div class="card-chance">${card.chance}</div>
                    <div class="card-reward">${card.reward}$</div>
                `;
                collection.appendChild(cardElement);
            });
        }
    </script>
</body>
</html>